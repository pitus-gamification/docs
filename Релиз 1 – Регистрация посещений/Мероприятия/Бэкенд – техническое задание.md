---
title: "Бэкенд: Техническое задание"
description:
---

## 1. Введение

### 1.1. Цель документа

Определить требования и спецификации для разработки бэкенд-функционала модуля **"Мероприятия"** в рамках первого релиза цифрового сервиса по автоматизации системы регистрации посещений мероприятий в университете.

### 1.2. Область применения

Документ предназначен для команды разработчиков бэкенда и тестировщиков, участвующих в реализации модуля **"Мероприятия"**.

---

## 2. Общее описание

### 2.1. Перспектива продукта

Модуль **"Мероприятия"** обеспечивает создание, управление и хранение информации о мероприятиях, проводимых в университете. Он является основой для других модулей, таких как **"Сканнер"**, **"Админ. приложение"** и **"MiniApp"**, которые будут взаимодействовать с данными мероприятий.

### 2.2. Основные функции модуля "Мероприятия"

- Управление данными мероприятий (CRUD).
- Хранение подробной информации о мероприятиях (название, описание, дата, время, место и т.д.).
- Предусмотрение возможности расширения функционала в будущем (например, привязка групп пользователей).

### 2.3. Классы пользователей

- **Администраторы:** Имеют полный доступ к управлению мероприятиями.
- **Модераторы:** Имеют доступ к информации о мероприятиях для проведения верификации участников.
- **Студенты:** Могут просматривать информацию о мероприятиях через **MiniApp**.

---

## 3. Функциональные требования

### 3.1. Управление мероприятиями

#### 3.1.1. Создание мероприятия

- **Описание:** Администратор создает новое мероприятие, вводя необходимые данные.
- **Требования:**
  - Ввод следующих данных:
    - **Название мероприятия**.
    - **Описание**.
    - **Дата и время начала**.
    - **Дата и время окончания**.
    - **Место проведения**.
  - Генерация уникального идентификатора мероприятия (**event_id**).
  - Сохранение данных мероприятия в базе данных.

#### 3.1.2. Просмотр мероприятий

- **Описание:** Пользователи могут просматривать список мероприятий и детали конкретного мероприятия.
- **Требования:**
  - Получение списка всех активных мероприятий с возможностью фильтрации и сортировки.
  - Получение подробной информации о конкретном мероприятии по его **event_id**.

#### 3.1.3. Обновление мероприятия

- **Описание:** Администратор может редактировать данные существующего мероприятия.
- **Требования:**
  - Изменение любых данных мероприятия, кроме **event_id**.
  - Сохранение обновленных данных в базе данных.
  - Обновление связанных данных (например, расписания).

#### 3.1.4. Удаление мероприятия

- **Описание:** Администратор может удалять мероприятия из системы.
- **Требования:**
  - Удаление мероприятия по его **event_id**.
  - Безопасное удаление с учетом ссылочной целостности данных.
  - Обработка случаев, когда мероприятие связано с другими модулями (например, уведомление модераторов или пользователей).

### 3.2. Подготовка к будущему функционалу

#### 3.2.1. Расширяемость модели данных

- **Описание:** Модель данных должна быть спроектирована с учетом будущего добавления функционала, такого как привязка групп пользователей.
- **Требования:**
  - Предусмотреть возможность добавления полей и связей в таблицу мероприятий без значительных изменений структуры.
  - Использовать стандартизированные методы именования и типы данных.

#### 3.2.2. Интерфейсы для интеграции

- **Описание:** API должны быть разработаны с учетом возможного расширения функционала.
- **Требования:**
  - Использовать RESTful архитектуру для API.
  - Документировать API с учетом будущих расширений.
  - Обеспечить версионирование API для поддержки изменений в будущем.

---

## 4. Нефункциональные требования

### 4.1. Безопасность

- **Аутентификация и авторизация:**
  - Использовать надежные методы аутентификации (например, JWT).
  - Реализовать ролевую модель доступа (**администратор**, **модератор**, **студент**).
- **Защита данных:**
  - Шифрование данных при передаче (SSL/TLS).
  - Соответствие требованиям законодательства о защите персональных данных (например, GDPR).

### 4.2. Производительность

- **Время отклика:** Не более 2 секунд для основных операций.
- **Нагрузка:** Способность обрабатывать стандартную нагрузку системы с возможностью масштабирования.

### 4.3. Масштабируемость

- **Архитектура:**
  - Модульная архитектура, позволяющая легко добавлять новый функционал.
  - Возможность горизонтального и вертикального масштабирования системы.

### 4.4. Надежность и отказоустойчивость

- **Доступность:** Система должна быть доступна не менее 99.9% времени.
- **Резервное копирование:** Регулярное резервное копирование базы данных.
- **Восстановление после сбоев:** Быстрое восстановление системы в случае непредвиденных сбоев.

### 4.5. Документирование

- **Код и API:**
  - Подробная документация кода для облегчения понимания и поддержки.
  - Документация API (например, с использованием Swagger/OpenAPI).

---

## 5. Требования к данным

### 5.1. Модель данных

#### Таблица `events`

| Поле           | Тип данных    | Описание                              | Ограничения                                |
|----------------|---------------|---------------------------------------|--------------------------------------------|
| event_id       | UUID          | Уникальный идентификатор мероприятия  | Primary Key, Not Null                      |
| name           | VARCHAR(200)  | Название мероприятия                  | Not Null                                   |
| description    | TEXT          | Описание мероприятия                  | Nullable                                   |
| start_datetime | TIMESTAMP     | Дата и время начала                   | Not Null                                   |
| end_datetime   | TIMESTAMP     | Дата и время окончания                | Not Null                                   |
| location       | VARCHAR(200)  | Место проведения                      | Nullable                                   |
| created_at     | TIMESTAMP     | Дата и время создания записи          | Default: CURRENT_TIMESTAMP                 |
| updated_at     | TIMESTAMP     | Дата и время последнего обновления    | Default: CURRENT_TIMESTAMP ON UPDATE       |

### 5.2. Требования к базе данных

- **Производительность:** Оптимизация запросов и использование индексов на часто используемых полях (например, `event_id`, `start_datetime`).
- **Целостность данных:** Обеспечение ссылочной целостности и ограничений на уровне базы данных.

---

## 6. Спецификация API

### 6.1. Эндпоинты для управления мероприятиями

#### 6.1.1. Создание мероприятия

- **Метод:** POST
- **URL:** `/api/v1/events`
- **Заголовки:**
  - `Authorization: Bearer <token>`
  - `Content-Type: application/json`
- **Требования к доступу:** Только пользователи с доступом `MANAGE_EVENTS` (администраторы) могут использовать данный эндпоинт.
- **Тело запроса:**
  ```json
  {
    "name": "IT Конференция",
    "description": "Ежегодная конференция по информационным технологиям.",
    "start_datetime": "2024-11-15T10:00:00Z",
    "end_datetime": "2024-11-15T18:00:00Z",
    "location": "Главный корпус, аудитория 101"
  }
  ```
- **Ответ:**
  - **201 Created**
  ```json
  {
    "event_id": "uuid",
    "name": "IT Конференция",
    "description": "Ежегодная конференция по информационным технологиям.",
    "start_datetime": "2024-11-15T10:00:00Z",
    "end_datetime": "2024-11-15T18:00:00Z",
    "location": "Главный корпус, аудитория 101",
    "created_at": "2024-10-30T12:00:00Z",
    "updated_at": "2024-10-30T12:00:00Z"
  }
  ```

#### 6.1.2. Получение списка мероприятий

- **Метод:** GET
- **URL:** `/api/v1/events`
- **Заголовки:**
  - `Authorization: Bearer <token>`
- **Параметры запроса (опционально):**
  - `start_date` — фильтрация по дате начала.
  - `end_date` — фильтрация по дате окончания.
  - `sort` — сортировка результатов.
  - `page` и `limit` — для пагинации.
- **Ответ:**
  - **200 OK**
  ```json
  [
    {
      "event_id": "uuid1",
      "name": "IT Конференция",
      "description": "Ежегодная конференция по информационным технологиям.",
      "start_datetime": "2024-11-15T10:00:00Z",
      "end_datetime": "2024-11-15T18:00:00Z",
      "location": "Главный корпус, аудитория 101",
      "created_at": "2024-10-30T12:00:00Z",
      "updated_at": "2024-10-30T12:00:00Z"
    }
    // ... другие мероприятия
  ]
  ```

#### 6.1.3. Получение данных конкретного мероприятия

- **Метод:** GET
- **URL:** `/api/v1/events/{event_id}`
- **Заголовки:**
  - `Authorization: Bearer <token>`
- **Ответ:**
  - **200 OK**
  ```json
  {
    "event_id": "uuid",
    "name": "IT Конференция",
    "description": "Ежегодная конференция по информационным технологиям.",
    "start_datetime": "2024-11-15T10:00:00Z",
    "end_datetime": "2024-11-15T18:00:00Z",
    "location": "Главный корпус, аудитория 101",
    "created_at": "2024-10-30T12:00:00Z",
    "updated_at": "2024-10-30T12:00:00Z"
  }
  ```
  - **404 Not Found** (если мероприятие не найдено)
  ```json
  {
    "error": "Мероприятие не найдено."
  }
  ```

#### 6.1.4. Обновление мероприятия

- **Метод:** PUT
- **URL:** `/api/v1/events/{event_id}`
- **Заголовки:**
  - `Authorization: Bearer <token>`
  - `Content-Type: application/json`
- **Требования к доступу:** Только пользователи с доступом `MANAGE_EVENTS` (администраторы) могут использовать данный эндпоинт.
- **Тело запроса:**
  ```json
  {
    "name": "Обновленная IT Конференция",
    "description": "Обновленное описание конференции.",
    "location": "Главный корпус, аудитория 202"
  }
  ```
- **Ответ:**
  - **200 OK**
  ```json
  {
    "event_id": "uuid",
    "name": "Обновленная IT Конференция",
    "description": "Обновленное описание конференции.",
    "start_datetime": "2024-11-15T10:00:00Z", // если не обновлялось, остается прежним
    "end_datetime": "2024-11-15T18:00:00Z",   // если не обновлялось, остается прежним
    "location": "Главный корпус, аудитория 202",
    "created_at": "2024-10-30T12:00:00Z",
    "updated_at": "2024-10-30T14:00:00Z"
  }
  ```
  - **404 Not Found** (если мероприятие не найдено)
  ```json
  {
    "error": "Мероприятие не найдено."
  }
  ```

#### 6.1.5. Удаление мероприятия

- **Метод:** DELETE
- **URL:** `/api/v1/events/{event_id}`
- **Заголовки:**
  - `Authorization: Bearer <token>`
- **Требования к доступу:** Только пользователи с доступом `MANAGE_EVENTS` (администраторы) могут использовать данный эндпоинт.
- **Ответ:**
  - **204 No Content**
  - **404 Not Found** (если мероприятие не найдено)
  ```json
  {
    "error": "Мероприятие не найдено."
  }
  ```

### 6.2. Аутентификация и авторизация

- **Примечание:** Эндпоинты для аутентификации (например, `/api/v1/auth/login`) реализуются в рамках модуля **"Авторизация"** и не включены в текущий объем работ по модулю **"Мероприятия"**.

---

## 7. Архитектурные решения

### 7.1. Сервисная архитектура

- **Модульность:** Модуль **"Мероприятия"** должен быть разработан так, чтобы его можно было легко интегрировать с другими модулями.

### 7.2. Подготовка к будущим функционалам

- **Привязка групп пользователей:**
  - Предусмотреть возможность добавления связей и полей в модель данных без значительных изменений.
  - Например, в будущем может быть добавлено поле для связи с группами пользователей.

---

## 8. Требования к безопасности

- **Аутентификация и авторизация:**
  - Реализовать механизмы проверки прав доступа для каждого эндпоинта.
  - Ограничить доступ к CRUD операциям только для администраторов.
- **Защита данных:**
  - Обеспечить шифрование данных при передаче (SSL/TLS).
  - Настроить безопасные политики CORS.
- **Логирование и аудит:**
  - Вести журналы действий пользователей для последующего аудита.
  - Обеспечить защиту журналов от несанкционированного доступа.

---

## 9. Требования к тестированию

### 9.1. Функциональное тестирование

- Проверка всех CRUD операций для мероприятий.
- Тестирование правильности обработки ошибок и исключений.

### 9.2. Нагрузочное тестирование

- Проверка работы системы под нагрузкой, соответствующей ожидаемому количеству пользователей и запросов.

### 9.3. Безопасностное тестирование

- Тестирование на уязвимости (SQL-инъекции, XSS, CSRF и т.д.).
- Проверка корректности аутентификации и авторизации.

---

## 10. План реализации

### 10.1. Этапы проекта

1. **Проектирование:**
   - Разработка модели данных.
   - Определение структуры API.

2. **Разработка:**
   - Реализация CRUD операций для мероприятий.
   - Реализация механизмов аутентификации и авторизации (взаимодействие с модулем **"Авторизация"**).

3. **Тестирование:**
   - Функциональное тестирование.
   - Нагрузочное и безопасностное тестирование.

4. **Документирование:**
   - Подготовка технической документации.
   - Обновление документации API.

5. **Внедрение:**
   - Развертывание на сервере.
   - Проведение необходимых настроек.

---

## 11. Дополнительные замечания

- **Качество кода:** Следование принципам чистого кода и код-стайлу команды.
- **Обратная связь:** Регулярные встречи команды для обсуждения прогресса и возникающих вопросов.
- **Риски:**
  - Возможные изменения требований.
  - Задержки в интеграции с другими модулями.
- **Взаимодействие с другими модулями:**
  - Предусмотреть механизмы для бесшовной интеграции с модулями **"Пользователи"**, **"Авторизация"**, **"Сканнер"** и **"MiniApp"** в будущем.