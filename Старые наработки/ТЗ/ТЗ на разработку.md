---
title: ТЗ на разработку
description: Публичное описание файла
---
### Описание проекта

Разработать систему геймификации для управления митапами, курсами, личными достижениями, ачивками и профилями пользователей. Система должна включать модули контроля доступа, админскую панель, веб приложение для организаторов и бот для пользователей.

### Основной стек технологий

- **Backend**: Python, FastAPI, SQLAlchemy, PostgreSQL, Docker, S3 (minio, ynxcloud), aiboto3
- **Frontend (админская панель)**: Vue.js или React.js или streamlit или wagtail

### Модули и их функционал

### 1. Система контроля доступа

**Функционал:**

1. Просмотр списка пользователей
    - Редактирование пользователя
    - Настройка прав доступа (тэги)
2. Просмотр истории действий
    - Логирование пользователя, действия и времени

### 2. Митапы

### Функционал админа:

1. Создание митапа
    - Название
    - Баннер
    - Расписание
    - Доп. информация
    - Тэги
    - Настройка количества баллов за посещение
2. Просмотр списка митапов
3. Взаимодействие с конкретным митапом
    - Просмотр информации о нем
    - Редактирование информации
    - Запуск рассылок/опросов
    - Интеграция с квизами
    - Настройка и запуск розыгрышей
    - Настройка обратной связи
    - Просмотр статистики (воронка)
4. Просмотр статистики по всем митапам
    - Агрегирование статистики по фильтрам
    - Фильтрация по тегам, датам
    - Диаграммы популярности и графики метрик
5. Просмотр истории действий

### Функционал вэб приложения организаторов:

1. Получение списка митапов
2. Взаимодействие с конкретным митапом
    - Просмотр информации
    - Сканирование QR-кода участников

### Функционал пользователя бота:

1. Просмотр списка митапов
2. Регистрация на митап
3. Участие в квизах (webapp)
4. Ссылки на формы обратной связи

### 3. Курсы

### Функционал админа:

- Информация

1. Создание курса
    - Баннер
    - Даты
    - Расписание
    - Настройка баллов за посещение/прохождение
2. Просмотр списка курсов
3. Взаимодействие с конкретным курсом
4. Просмотр статистики по всем курсам
    - Количество регистраций, посещений, завершений
5. Просмотр истории действий

### Функционал ведущего курсов:

1. Редактирование информации о курсе
2. Рассылка сообщений участникам курса
3. Редактирование напоминалок о курсе
4. Просмотр посещений и отметок
5. Просмотр статистики по курсу

### Функционал пользователя бота:

1. Просмотр списка курсов
2. Взаимодействие с курсом
    - Регистрация
    - Просмотр информации и расписания
    - Личная статистика посещений

### 4. Личные достижения

### Функционал админа:

1. Просмотр списка заявок по фильтрам
2. Взаимодействие с заявкой
    - Просмотр содержания
    - Обработка заявки (начисление баллов или отказ)
3. Просмотр статистики по заявкам с фильтрами
4. Просмотр истории действий

### Функционал пользователя бота:

1. Создание новой заявки
2. Просмотр статусов отправленных заявок

### 5. Ачивки

### Функционал админа:

1. Конструктор ачивок
    - Картинка
    - Короткий текст
    - Настройка баллов
    - Дополнительные тэги
2. Вручение ачивок
    - Выбор пользователей
    - Выбор ачивки
3. Просмотр истории действий

### 6. Профили

### Функционал админа:

1. Просмотр списка профилей
2. Взаимодействие с профилем
    - Просмотр статистики
    - Просмотр информации
    - Просмотр уровня пользователя
    - Просмотр ачивок
    - Подтверждение верификации профиля пользователя по фото Всего подразумевается 3 статуса:
        - “ожидание верификации” - включается автоматически когда пользователь отправляет новую фотку
        - “верификация отклонена” - админ не подтверждает новое фото, либо переводит подтвержденный аккаунт, чтобы запросить новую фотку
        - “верификация подтверждена” - фото подходит по всем критериям

### Функционал пользователя бота:

1. Просмотр конкретного профиля
    - Ачивки
    - Информация
    - Уровень пользователя
2. Верификация своего профиля - необходимо подгрузить фотографию, на которой будет видно лицо человека и его студенческий билет Пользователю доступен просмотр статуса верификации

### 7. Рассылка сообщений

### Функционал:

1. Настройка информативного сообщения
2. Настройка сообщения-опроса
3. Просмотр статистики по опросам
4. Просмотр истории рассылок и действий

### Предложения по стекам для админской панели

### Streamlit

**Плюсы:**

- **Простота разработки**: Streamlit позволяет быстро создавать веб-приложения для анализа данных и прототипирования. Это может быть полезно для быстрого создания админской панели.
- **Интеграция с Python**: Streamlit написан на Python и позволяет легко интегрировать Python-код, что упрощает работу с данными и аналитикой.
- **Интерактивность**: Поддержка интерактивных виджетов для визуализации данных и управления ими.
- **Быстрое развертывание**: Приложения на Streamlit легко развертывать и обновлять.

**Минусы:**

- **Ограниченная функциональность**: Streamlit предназначен в первую очередь для простых приложений и прототипов. Для сложных админских панелей с множеством взаимодействий и компонентов он может быть недостаточно мощным.
- **Меньшая гибкость в UI/UX**: Streamlit имеет ограниченные возможности по сравнению с React в плане настройки пользовательского интерфейса и взаимодействий.
- **Производительность**: Для больших и сложных приложений производительность может быть ниже по сравнению с фронтендом на React.

### Wagtail

**Плюсы:**

- **CMS-функциональность**: Wagtail — это мощная система управления контентом на базе Django, которая предоставляет готовые компоненты для администрирования контента.
- **Интеграция с Django**: Полная совместимость с Django, что позволяет использовать мощные функции Django ORM, безопасность и другие возможности.
- **Редактор страниц**: Удобный редактор страниц для контент-менеджеров, что может быть полезно для управления контентом на сайте.
- **Расширяемость**: Возможность добавления собственных модулей и расширений.

**Минусы:**

- **Сложность настройки**: Более сложная настройка по сравнению с React, особенно если требуется кастомизация функционала.
- **Избыточность для админской панели**: Если основной задачей является создание админской панели, функциональность CMS может быть избыточной.
- **Ограниченная гибкость в UI/UX**: Хотя Wagtail предоставляет мощные возможности для управления контентом, гибкость в создании сложных пользовательских интерфейсов ниже, чем у React.

### React

**Плюсы:**

- **Гибкость**: Высокая гибкость и возможность создания сложных пользовательских интерфейсов с большим количеством взаимодействий.
- **Экосистема**: Большая экосистема библиотек и инструментов, таких как Redux, Material-UI, которые облегчают разработку.
- **Производительность**: Высокая производительность и возможность оптимизации.
- **Сообщество**: Большое сообщество разработчиков и обилие документации и примеров.

**Минусы:**

- **Крутая кривая обучения**: Для новичков React может быть сложен в освоении.
- **Сложность настройки**: Для начала работы требуется настройка сборки (например, Webpack), что может быть сложным для новичков.

### Альтернативы

1. **Vue.js**
    - **Плюсы**: Легкость в освоении, отличная документация, гибкость и высокое сообщество.
    - **Минусы**: Меньшая экосистема по сравнению с React.
2. **Angular**
    - **Плюсы**: Полноценный фреймворк, включающий все необходимые инструменты для разработки.
    - **Минусы**: Более высокая сложность и крутая кривая обучения по сравнению с React и Vue.js.
3. **Svelte**
    - **Плюсы**: Простота и высокая производительность, меньший размер итогового бандла.
    - **Минусы**: Меньшее сообщество и экосистема по сравнению с React и Vue.js.

### Flutter для веб-приложения ораганизаторов

**Плюсы:**

1. **Единый код для всех платформ:**
    
    - Возможность писать один код для веба, мобильных приложений (iOS и Android) и десктопных приложений, что экономит время и усилия.
2. **Гибкость и мощный UI:**
    
    - Flutter позволяет создавать привлекательные и анимированные интерфейсы, что может быть полезно для мероприятий с высоким уровнем интерактивности и визуальных эффектов.
    
    **Минусы:**
    
    1. **Производительность:**
        - Производительность веб-приложений на Flutter может быть ниже по сравнению с нативными веб-фреймворками, особенно для сложных и нагруженных интерфейсов.
    2. **Размер приложения:**
        - Приложения на Flutter могут быть более "тяжелыми" по сравнению с веб-приложениями, написанными на других фреймворках.
    3. **Ограниченная поддержка веб-стандартов:**
        - Не все веб-стандарты и функции могут быть доступны или корректно работать в Flutter для веб.

### Дополнительные требования

- Весь код должен быть оформлен в Docker-контейнерах для легкости развертывания и масштабирования.
- Разработка должна вестись с учетом безопасности данных пользователей.
- Взаимодействие всех модулей должно быть хорошо задокументировано.
- Необходимо обеспечить возможность расширения функционала в будущем.

## Примерная структура бд

[https://drawsql.app/teams/tims-team-29/diagrams/itam-gamification/embed](https://drawsql.app/teams/tims-team-29/diagrams/itam-gamification/embed)

### Основные таблицы

1. **Пользователи**
    - **users**
        - id (PK) - уникальный идентификатор пользователя
        - username - имя пользователя
        - email - электронная почта
        - password_hash - хэш пароля
        - created_at - дата создания
        - updated_at - дата обновления
2. **Роли и права доступа**
    - **roles**
        - id (PK) - уникальный идентификатор роли
        - name - название роли
    - **permissions**
        - id (PK) - уникальный идентификатор права
        - name - название права
    - **user_roles**
        - user_id (FK) - ссылка на пользователя
        - role_id (FK) - ссылка на роль
    - **role_permissions**
        - role_id (FK) - ссылка на роль
        - permission_id (FK) - ссылка на право
3. **Митапы**
    - **meetups**
        - id (PK) - уникальный идентификатор митапа
        - title - название митапа
        - banner_url - ссылка на баннер
        - schedule - расписание
        - additional_info - дополнительная информация
        - points - количество баллов за посещение
        - created_at - дата создания
        - updated_at - дата обновления
    - **meetup_tags**
        - id (PK) - уникальный идентификатор тега
        - name - название тега
    - **meetup_tag_assignments**
        - meetup_id (FK) - ссылка на митап
        - tag_id (FK) - ссылка на тег
    - **meetup_attendance**
        - id (PK) - уникальный идентификатор посещения
        - user_id (FK) - ссылка на пользователя
        - meetup_id (FK) - ссылка на митап
        - attended_at - дата посещения
4. **Курсы**
    - **courses**
        - id (PK) - уникальный идентификатор курса
        - title - название курса
        - banner_url - ссылка на баннер
        - schedule - расписание
        - additional_info - дополнительная информация
        - points - количество баллов за прохождение
        - created_at - дата создания
        - updated_at - дата обновления
    - **course_tags**
        - id (PK) - уникальный идентификатор тега
        - name - название тега
    - **course_tag_assignments**
        - course_id (FK) - ссылка на курс
        - tag_id (FK) - ссылка на тег
    - **course_attendance**
        - id (PK) - уникальный идентификатор посещения
        - user_id (FK) - ссылка на пользователя
        - course_id (FK) - ссылка на курс
        - attended_at - дата посещения
5. **Достижения**
    - **achievements**
        - id (PK) - уникальный идентификатор достижения
        - title - название достижения
        - description - описание
        - points - количество баллов за достижение
        - created_at - дата создания
        - updated_at - дата обновления
    - **user_achievements**
        - id (PK) - уникальный идентификатор
        - user_id (FK) - ссылка на пользователя
        - achievement_id (FK) - ссылка на достижение
        - awarded_at - дата вручения
6. **Заявки на достижения**
    - **achievement_requests**
        - id (PK) - уникальный идентификатор заявки
        - user_id (FK) - ссылка на пользователя
        - content - содержание заявки
        - status - статус заявки (в ожидании, одобрена, отклонена)
        - points_awarded - количество начисленных баллов (если одобрена)
        - created_at - дата создания
        - updated_at - дата обновления
7. **Профили пользователей**
    - **profiles**
        - id (PK) - уникальный идентификатор профиля
        - user_id (FK) - ссылка на пользователя
        - first_name - имя
        - last_name - фамилия
        - group - группа
        - telegram_link - ссылка на Telegram
        - created_at - дата создания
        - updated_at - дата обновления
8. **История действий**
    - **action_logs**
        - id (PK) - уникальный идентификатор записи
        - user_id (FK) - ссылка на пользователя
        - action - действие
        - timestamp - временная метка действия
9. **Рассылки**
    - **newsletters**
        - id (PK) - уникальный идентификатор рассылки
        - type - тип рассылки (информативная, опрос, **напоминание о мероприятии**)
        - content - содержание
        - banner_url - ссылка на баннер
        - scheduled_at - запланированное время отправки
        - created_at - дата создания
        - updated_at - дата обновления